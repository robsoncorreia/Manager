<Page
    x:Class="FC.Manager.View.Project.DetailProjectPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:core="clr-namespace:System;assembly=mscorlib"
    xmlns:ctl="clr-namespace:FC.Manager.View.Components"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dd="clr-namespace:GongSolutions.Wpf.DragDrop;assembly=GongSolutions.Wpf.DragDrop"
    xmlns:enum="clr-namespace:FC.Domain.Model.Project;assembly=FC.Domain"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="clr-namespace:FC.Domain.Model;assembly=FC.Domain"
    xmlns:p="clr-namespace:FC.Domain.Properties;assembly=FC.Domain"
    xmlns:validator="clr-namespace:FC.Domain.Validator;assembly=FC.Domain"
    x:Name="detailProjectPage"
    Title="Detail Project "
    d:DesignHeight="450"
    d:DesignWidth="800"
    Background="#7F000000"
    DataContext="{Binding DetailProject, Source={StaticResource Locator}}"
    mc:Ignorable="d">
    <Page.Resources>
        <ObjectDataProvider
            x:Key="ambienceOrderByEnum"
            MethodName="GetValues"
            ObjectType="{x:Type core:Enum}">
            <ObjectDataProvider.MethodParameters>
                <x:Type Type="enum:AmbienceOrderByEnum" />
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </Page.Resources>
    <Page.Style>
        <Style TargetType="{x:Type Page}">
            <Style.Triggers>
                <Trigger Property="Visibility" Value="Visible">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation
                                    Storyboard.TargetProperty="Opacity"
                                    From="0.0"
                                    To="1.0"
                                    Duration="0:0:1" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Page.Style>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding LoadedCommand}" CommandParameter="{Binding ElementName=TabControl}" />
        </i:EventTrigger>
        <i:EventTrigger EventName="Unloaded">
            <i:InvokeCommandAction Command="{Binding UnloadedCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <materialDesign:DialogHost
        Margin="0"
        Padding="0"
        DialogContent="{Binding DialogContent}"
        FocusVisualStyle="{x:Null}"
        IsOpen="{Binding IsOpenDialogHost}">
        <Grid Background="{Binding SelectedProjectModel.PrimaryColor}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="{StaticResource headerHeight}" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Border Background="#54000000" CornerRadius="0,0,2,2">
                    <Border.Effect>
                        <DropShadowEffect
                            BlurRadius="0"
                            Direction="0"
                            Opacity="1"
                            RenderingBias="Quality"
                            ShadowDepth="0"
                            Color="Black" />
                    </Border.Effect>
                </Border>
                <Grid Grid.Row="0" Margin="8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Button
                        Grid.RowSpan="2"
                        Grid.Column="0"
                        Margin="8,0,24,0"
                        VerticalAlignment="Center"
                        Command="{Binding NavigateBeforeCommand}"
                        FocusVisualStyle="{x:Null}"
                        Style="{StaticResource MaterialDesignToolButton}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon
                                Width="24"
                                Height="24"
                                Foreground="{StaticResource MaterialDesignDarkForeground}"
                                Kind="NavigateBefore" />
                            <TextBlock
                                Margin="0,0,0,1"
                                VerticalAlignment="Center"
                                Foreground="{StaticResource MaterialDesignDarkForeground}"
                                Text="{x:Static p:Resources.Back}" />
                        </StackPanel>
                    </Button>
                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="2"
                        VerticalAlignment="Center"
                        Foreground="{StaticResource MaterialDesignDarkForeground}"
                        Style="{StaticResource MaterialDesignSubtitle1TextBlock}"
                        Text="{Binding SelectedProjectModel.Name, TargetNullValue={x:Static p:Resources.Unnamed}}" />
                    <TextBlock
                        Grid.Row="1"
                        Grid.Column="2"
                        VerticalAlignment="Center"
                        FontSize="10"
                        Foreground="{StaticResource MaterialDesignDarkForeground}"
                        Opacity=".5"
                        Text="{Binding SelectedProjectModel.ParseObject.CreatedAt, StringFormat=MM/dd/yyyy}" />
                </Grid>
                <TabControl
                    x:Name="TabControl"
                    Grid.Row="1"
                    Margin="0,-2,0,0"
                    dd:DragDrop.DropHandler="{Binding}"
                    dd:DragDrop.IsDragSource="True"
                    dd:DragDrop.IsDropTarget="True"
                    dd:DragDrop.UseDefaultDragAdorner="True"
                    Background="#7F000000"
                    FocusVisualStyle="{x:Null}"
                    IsEnabled="{Binding IsTabEnable, UpdateSourceTrigger=PropertyChanged}"
                    ItemContainerStyle="{DynamicResource TabItemCustom}"
                    SelectedIndex="{Binding SelectedIndexTabControl}"
                    Style="{DynamicResource TabControlCustom}">
                    <!--#region Gateway-->
                    <TabItem x:Name="Device" Header="{x:Static p:Resources.Gateways}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Border Grid.Row="0" Style="{DynamicResource BorderMenu}" />
                            <Menu
                                Grid.Row="0"
                                Background="{StaticResource Dark}"
                                Cursor="Hand"
                                IsMainMenu="True"
                                Style="{StaticResource MaterialDesignMenu}">
                                <MenuItem
                                    Command="{Binding GetDevicesCommand}"
                                    Foreground="White"
                                    Header="{x:Static p:Resources.Reload}"
                                    Style="{StaticResource MaterialDesignMenuItem}" />
                                <Button
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Stretch"
                                    Command="{Binding GoToAddIPDeviceCommand}"
                                    Content="{x:Static p:Resources.Add_Gateway}"
                                    FocusVisualStyle="{x:Null}"
                                    Style="{StaticResource MaterialDesignRaisedDarkButton}" />
                            </Menu>
                            <Button
                                Margin="0,0,8,0"
                                HorizontalAlignment="Right"
                                Command="{Binding OpenDetailProjetFilterCommand}"
                                Style="{StaticResource FilterButton}">
                                <materialDesign:DialogHost IsOpen="{Binding IsOpenDetailProjetFilter}">
                                    <TextBlock Text="{x:Static p:Resources.Filter}" />
                                    <materialDesign:DialogHost.DialogContent>
                                        <Border>
                                            <Grid>
                                                <Border CornerRadius="2">
                                                    <Border.Effect>
                                                        <DropShadowEffect BlurRadius="4" ShadowDepth="2" />
                                                    </Border.Effect>
                                                </Border>
                                                <Border
                                                    Background="{StaticResource Dark}"
                                                    CornerRadius="2"
                                                    FocusVisualStyle="{x:Null}">
                                                    <StackPanel Margin="8" HorizontalAlignment="Stretch">
                                                        <TextBox
                                                            Width="180"
                                                            HorizontalAlignment="Stretch"
                                                            VerticalAlignment="Stretch"
                                                            materialDesign:HintAssist.FloatingScale="0.90"
                                                            materialDesign:HintAssist.Hint="{x:Static p:Resources.Device_name}"
                                                            materialDesign:TextFieldAssist.TextBoxViewMargin="1 0 1 0"
                                                            materialDesign:ThemeAssist.Theme="Dark"
                                                            Foreground="White"
                                                            Style="{StaticResource MaterialDesignFilledTextBox}"
                                                            Text="{Binding FilterDevices, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                                                        <Button
                                                            Margin="0,8,0,0"
                                                            HorizontalAlignment="Right"
                                                            Command="{Binding CloseDetailProjetFilterCommand}"
                                                            Content="{x:Static p:Resources.Close}" />
                                                    </StackPanel>
                                                </Border>
                                            </Grid>
                                        </Border>
                                    </materialDesign:DialogHost.DialogContent>
                                </materialDesign:DialogHost>
                            </Button>
                            <TextBlock
                                Grid.Row="1"
                                Margin="16,16,16,8"
                                Foreground="{StaticResource MaterialDesignDarkForeground}"
                                Style="{StaticResource MaterialDesignHeadline4TextBlock}"
                                Text="{x:Static p:Resources.Gateway}" />
                            <Separator
                                Grid.Row="2"
                                Margin="0,0,0,-4"
                                Style="{StaticResource MaterialDesignDarkSeparator}" />
                            <ListBox
                                x:Name="LbDevices"
                                Grid.Row="3"
                                Background="#22000000"
                                BorderBrush="#22ffffff"
                                BorderThickness="1"
                                ItemsSource="{Binding SelectedProjectModel.Devices}"
                                SelectedIndex="{Binding SelectedProjectModel.SelectedIndexDeviceModel}">
                                <ListBox.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel />
                                    </ItemsPanelTemplate>
                                </ListBox.ItemsPanel>
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.Resources>
                                                <Style TargetType="{x:Type Image}">
                                                    <Setter Property="Height" Value="14" />
                                                    <Setter Property="Width" Value="14" />
                                                    <Setter Property="RenderOptions.BitmapScalingMode" Value="HighQuality" />
                                                </Style>
                                            </Grid.Resources>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Border
                                                Grid.Row="0"
                                                Grid.RowSpan="3"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                Width="202"
                                                Height="110"
                                                materialDesign:ThemeAssist.Theme="Dark"
                                                Background="{Binding Background}"
                                                CornerRadius="4"
                                                FocusVisualStyle="{x:Null}"
                                                ToolTip="{Binding Path=.}">
                                                <Border.Effect>
                                                    <DropShadowEffect BlurRadius="4" ShadowDepth="0" />
                                                </Border.Effect>
                                            </Border>
                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                Width="184"
                                                Margin="8,4,8,0"
                                                VerticalAlignment="Top"
                                                materialDesign:HintAssist.Hint="{x:Static p:Resources.Gateway}"
                                                materialDesign:TextFieldAssist.CharacterCounterVisibility="Collapsed"
                                                materialDesign:ThemeAssist.Theme="Dark"
                                                BorderThickness="0"
                                                Foreground="White"
                                                IsEnabled="True"
                                                IsReadOnly="False"
                                                MaxLength="30"
                                                Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                                Text="{Binding Name, TargetNullValue={x:Static p:Resources.Unnamed}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                <TextBox.InputBindings>
                                                    <KeyBinding
                                                        Command="{Binding DetailProject.RenameGatewayCommand, Source={StaticResource Locator}}"
                                                        CommandParameter="{Binding Path=.}"
                                                        Gesture="Enter" />
                                                </TextBox.InputBindings>
                                            </TextBox>
                                            <StackPanel
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Orientation="Horizontal">
                                                <TextBox
                                                    Margin="8,0,0,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    materialDesign:HintAssist.Hint="{x:Static p:Resources.Model}"
                                                    materialDesign:TextFieldAssist.UnderlineBrush="Transparent"
                                                    FontSize="10"
                                                    Foreground="White"
                                                    IsEnabled="False"
                                                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                                    Text="{Binding DefaultName}" />
                                                <TextBox
                                                    Margin="8,0,0,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    materialDesign:HintAssist.Hint="{x:Static p:Resources.Pin}"
                                                    materialDesign:TextFieldAssist.UnderlineBrush="Transparent"
                                                    FontSize="10"
                                                    Foreground="White"
                                                    IsEnabled="False"
                                                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                                    Text="{Binding Pin}" />
                                                <TextBox
                                                    Margin="8,0,0,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    materialDesign:HintAssist.Hint="{x:Static p:Resources.IP}"
                                                    materialDesign:TextFieldAssist.UnderlineBrush="Transparent"
                                                    FontSize="10"
                                                    Foreground="White"
                                                    IsEnabled="False"
                                                    Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                                    Text="{Binding LocalIP, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                            </StackPanel>
                                            <StackPanel
                                                Grid.Row="2"
                                                Margin="8"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Orientation="Horizontal">
                                                <StackPanel.Resources />
                                                <StackPanel.Style>
                                                    <Style TargetType="{x:Type StackPanel}">
                                                        <Setter Property="Visibility" Value="Collapsed" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ZwaveFrequency}" Value="{x:Static model:ZwaveFrequencyEnum.ANZBR}">
                                                                <Setter Property="Visibility" Value="Visible" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </StackPanel.Style>
                                                <Image Source="/FC.Domain;component/Assets/CountrysFlags/australia.png" ToolTip="{x:Static p:Resources.Australia}">
                                                    <Image.Effect>
                                                        <DropShadowEffect BlurRadius="4" ShadowDepth="0" />
                                                    </Image.Effect>
                                                </Image>
                                                <Image Source="/FC.Domain;component/Assets/CountrysFlags/brazil.png" ToolTip="{x:Static p:Resources.Brazil}">
                                                    <Image.Effect>
                                                        <DropShadowEffect BlurRadius="4" ShadowDepth="0" />
                                                    </Image.Effect>
                                                </Image>
                                                <Image Source="/FC.Domain;component/Assets/CountrysFlags/newZealand.png" ToolTip="{x:Static p:Resources.New_Zealand}">
                                                    <Image.Effect>
                                                        <DropShadowEffect BlurRadius="4" ShadowDepth="0" />
                                                    </Image.Effect>
                                                </Image>
                                            </StackPanel>
                                            <ctl:IsPrimaryUserControl
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                Margin="4"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                DataContext="{Binding Path=.}" />
                                            <materialDesign:PopupBox
                                                Grid.Row="0"
                                                Grid.RowSpan="3"
                                                Grid.Column="1"
                                                Margin="0,0,0,8"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Bottom"
                                                materialDesign:ThemeAssist.Theme="Dark"
                                                FocusVisualStyle="{x:Null}"
                                                Foreground="{StaticResource MaterialDesignDarkForeground}"
                                                StaysOpen="True"
                                                Style="{StaticResource MaterialDesignToolPopupBox}">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="8" />
                                                    </Grid.RowDefinitions>
                                                    <TextBlock
                                                        Grid.Row="0"
                                                        Grid.Column="0"
                                                        Margin="16,8,8,16"
                                                        Style="{StaticResource MaterialDesignHeadlineTextBlock}"
                                                        Text="{x:Static p:Resources.Options}" />
                                                    <!--#region Delete-->
                                                    <TextBlock
                                                        Grid.Row="1"
                                                        Grid.Column="0"
                                                        Margin="16,8,8,0"
                                                        Text="{x:Static p:Resources.Delete_device}" />
                                                    <TextBlock
                                                        Grid.Row="2"
                                                        Grid.Column="0"
                                                        Margin="16,0,8,8"
                                                        FontSize="10"
                                                        Opacity=".5"
                                                        Style="{StaticResource MaterialDesignSubheadingTextBlock}"
                                                        Text="{x:Static p:Resources.The_device_will_be_excluded_from_the_project}" />
                                                    <Button
                                                        Grid.Row="1"
                                                        Grid.RowSpan="2"
                                                        Grid.Column="1"
                                                        Margin="16,0"
                                                        VerticalAlignment="Center"
                                                        Command="{Binding ElementName=LbDevices, Path=DataContext.DeleteDeviceAsyncCommand, TargetNullValue={x:Null}}"
                                                        CommandParameter="{Binding Path=.}"
                                                        Content="{x:Static p:Resources._Delete}"
                                                        FocusVisualStyle="{x:Null}"
                                                        Style="{StaticResource DeleteButton}" />
                                                    <!--#endregion Delete-->
                                                    <!--#region Sync Gateway-->
                                                    <TextBlock
                                                        Grid.Row="3"
                                                        Grid.Column="0"
                                                        Margin="16,8,8,0"
                                                        Text="{x:Static p:Resources.Sync_Gateway}" />
                                                    <TextBlock
                                                        Grid.Row="4"
                                                        Grid.Column="0"
                                                        Width="140"
                                                        Margin="16,0,8,8"
                                                        HorizontalAlignment="Left"
                                                        FontSize="10"
                                                        Opacity=".5"
                                                        Style="{StaticResource MaterialDesignSubheadingTextBlock}"
                                                        Text="{x:Static p:Resources.Looks_for_the_gateway_on_the_network_to_get_its_settings}"
                                                        TextWrapping="WrapWithOverflow" />
                                                    <Button
                                                        Grid.Row="3"
                                                        Grid.RowSpan="2"
                                                        Grid.Column="1"
                                                        Margin="16,0"
                                                        VerticalAlignment="Center"
                                                        Command="{Binding ElementName=LbDevices, Path=DataContext.SyncGatewayCommand, TargetNullValue={x:Null}}"
                                                        CommandParameter="{Binding Path=.}"
                                                        Content="{x:Static p:Resources.Sync}"
                                                        FocusVisualStyle="{x:Null}"
                                                        Style="{StaticResource DownloadButton}" />
                                                    <!--#endregion Sync Gateway-->

                                                    <Button
                                                        Grid.Row="0"
                                                        Grid.Column="1"
                                                        HorizontalAlignment="Right"
                                                        VerticalAlignment="Top"
                                                        Command="{x:Static materialDesign:PopupBox.ClosePopupCommand}"
                                                        FocusVisualStyle="{x:Null}"
                                                        Style="{StaticResource MaterialDesignFlatMidBgButton}">
                                                        <materialDesign:PackIcon Kind="Close" />
                                                    </Button>
                                                    <Border Grid.Row="3" />
                                                </Grid>
                                            </materialDesign:PopupBox>
                                        </Grid>
                                        <!--<Grid>
                                            <Border
                                                Width="244"
                                                Height="144"
                                                Background="{Binding Background}"
                                                BorderBrush="{StaticResource Dark}"
                                                BorderThickness="2"
                                                CornerRadius="2"
                                                ToolTip="{Binding Path=.}">
                                                <Border.Effect>
                                                    <DropShadowEffect
                                                        BlurRadius="4"
                                                        Opacity=".5"
                                                        ShadowDepth="2" />
                                                </Border.Effect>
                                            </Border>
                                            <Border
                                                Width="244"
                                                Height="144"
                                                Background="{Binding Background}"
                                                BorderBrush="{StaticResource Dark}"
                                                BorderThickness="2"
                                                CornerRadius="2"
                                                ToolTip="{Binding Path=.}">
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="MouseLeftButtonUp">
                                                        <i:InvokeCommandAction Command="{Binding ElementName=LbDevices, Path=DataContext.GoToDetailDeviceCommand, TargetNullValue={x:Null}}" CommandParameter="{Binding Path=.}" />
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                                <Grid>
                                                    <Grid.Resources>
                                                        <Style TargetType="{x:Type Image}">
                                                            <Setter Property="RenderOptions.BitmapScalingMode" Value="HighQuality" />
                                                        </Style>
                                                    </Grid.Resources>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*" />
                                                        <RowDefinition Height="Auto" />
                                                    </Grid.RowDefinitions>
                                                    <StackPanel
                                                        Margin="4,4,0,0"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Top">
                                                        <StackPanel.Resources />
                                                        <StackPanel.Style>
                                                            <Style TargetType="{x:Type StackPanel}">
                                                                <Setter Property="Visibility" Value="Collapsed" />
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding ZwaveFrequency}" Value="{x:Static model:ZwaveFrequencyEnum.ANZBR}">
                                                                        <Setter Property="Visibility" Value="Visible" />
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </StackPanel.Style>
                                                        <Image
                                                            Width="18"
                                                            Height="18"
                                                            Source="/FC.Domain;component/Assets/CountrysFlags/australia.png"
                                                            ToolTip="{x:Static p:Resources.Australia}">
                                                            <Image.Effect>
                                                                <DropShadowEffect BlurRadius="4" ShadowDepth="0" />
                                                            </Image.Effect>
                                                        </Image>
                                                        <Image
                                                            Width="18"
                                                            Height="18"
                                                            Source="/FC.Domain;component/Assets/CountrysFlags/brazil.png"
                                                            ToolTip="{x:Static p:Resources.Brazil}">
                                                            <Image.Effect>
                                                                <DropShadowEffect BlurRadius="4" ShadowDepth="0" />
                                                            </Image.Effect>
                                                        </Image>
                                                        <Image
                                                            Width="18"
                                                            Height="18"
                                                            Source="/FC.Domain;component/Assets/CountrysFlags/newZealand.png"
                                                            ToolTip="{x:Static p:Resources.New_Zealand}">
                                                            <Image.Effect>
                                                                <DropShadowEffect BlurRadius="4" ShadowDepth="0" />
                                                            </Image.Effect>
                                                        </Image>
                                                    </StackPanel>
                                                    <Image
                                                        Grid.Row="0"
                                                        Height="60"
                                                        Margin="32,0,0,0"
                                                        HorizontalAlignment="Left"
                                                        RenderOptions.BitmapScalingMode="HighQuality"
                                                        RenderOptions.EdgeMode="Aliased"
                                                        Source="{Binding Path=., Converter={StaticResource devicesImageConverter}}" />
                                                    <Border
                                                        Grid.Row="1"
                                                        Background="Black"
                                                        CornerRadius="0 0 2 2"
                                                        Opacity=".5" />
                                                    <Grid Grid.Row="1" Margin="8,8,8,4">
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock
                                                            Grid.Row="0"
                                                            Grid.Column="0"
                                                            Grid.ColumnSpan="5"
                                                            VerticalAlignment="Center"
                                                            Foreground="{StaticResource MaterialDesignDarkForeground}"
                                                            Text="{Binding Name}" />
                                                        <TextBlock
                                                            Grid.Row="1"
                                                            Grid.Column="1"
                                                            Margin="0,0,8,0"
                                                            VerticalAlignment="Center"
                                                            Foreground="{StaticResource MaterialDesignDarkForeground}"
                                                            Opacity=".8"
                                                            Text="{Binding LocalPortTCP}"
                                                            TextOptions.TextRenderingMode="ClearType"
                                                            TextTrimming="CharacterEllipsis" />
                                                        <TextBlock
                                                            Grid.Row="1"
                                                            Grid.Column="2"
                                                            Margin="0,0,8,0"
                                                            VerticalAlignment="Center"
                                                            Foreground="{StaticResource MaterialDesignDarkForeground}"
                                                            Opacity=".8"
                                                            Text="{Binding Pin}"
                                                            TextOptions.TextRenderingMode="ClearType"
                                                            TextTrimming="CharacterEllipsis" />
                                                        <TextBlock
                                                            Grid.Row="1"
                                                            Grid.Column="0"
                                                            Margin="0,0,8,0"
                                                            VerticalAlignment="Center"
                                                            Foreground="{StaticResource MaterialDesignDarkForeground}"
                                                            Text="{Binding LocalIP}"
                                                            TextOptions.TextRenderingMode="ClearType"
                                                            TextTrimming="CharacterEllipsis" />
                                                        <ContentControl
                                                            Grid.Row="1"
                                                            Grid.Column="3"
                                                            VerticalAlignment="Center">
                                                            <ContentControl.Style>
                                                                <Style TargetType="{x:Type ContentControl}">
                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding ConnectionType}" Value="{x:Static model:ConnectionType.Ethernet}">
                                                                            <Setter Property="Content">
                                                                                <Setter.Value>
                                                                                    <materialDesign:PackIcon
                                                                                        VerticalAlignment="Center"
                                                                                        Foreground="{StaticResource MaterialDesignDarkForeground}"
                                                                                        Kind="Ethernet" />
                                                                                </Setter.Value>
                                                                            </Setter>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding ConnectionType}" Value="{x:Static model:ConnectionType.WiFi}">
                                                                            <Setter Property="Content">
                                                                                <Setter.Value>
                                                                                    <materialDesign:PackIcon
                                                                                        VerticalAlignment="Center"
                                                                                        Foreground="{StaticResource MaterialDesignDarkForeground}"
                                                                                        Kind="Wifi" />
                                                                                </Setter.Value>
                                                                            </Setter>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding ConnectionType}" Value="{x:Static model:ConnectionType.EthernetWiFi}">
                                                                            <Setter Property="Content">
                                                                                <Setter.Value>
                                                                                    <StackPanel Orientation="Horizontal">
                                                                                        <materialDesign:PackIcon
                                                                                            VerticalAlignment="Center"
                                                                                            Foreground="{StaticResource MaterialDesignDarkForeground}"
                                                                                            Kind="Ethernet" />
                                                                                        <materialDesign:PackIcon
                                                                                            VerticalAlignment="Center"
                                                                                            Foreground="{StaticResource MaterialDesignDarkForeground}"
                                                                                            Kind="Wifi" />
                                                                                    </StackPanel>
                                                                                </Setter.Value>
                                                                            </Setter>
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </ContentControl.Style>
                                                        </ContentControl>
                                                        <materialDesign:PopupBox
                                                            Grid.Row="0"
                                                            Grid.RowSpan="2"
                                                            Grid.Column="5"
                                                            Margin="8,0,0,0"
                                                            Padding="0"
                                                            VerticalAlignment="Center"
                                                            materialDesign:ThemeAssist.Theme="Dark"
                                                            FocusVisualStyle="{x:Null}"
                                                            Foreground="{StaticResource MaterialDesignDarkForeground}"
                                                            PopupMode="Click"
                                                            StaysOpen="True"
                                                            Style="{StaticResource MaterialDesignToolPopupBox}">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="*" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                </Grid.ColumnDefinitions>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto" />
                                                                    <RowDefinition Height="Auto" />
                                                                    <RowDefinition Height="Auto" />
                                                                    <RowDefinition Height="Auto" />
                                                                    <RowDefinition Height="Auto" />
                                                                    <RowDefinition Height="8" />
                                                                </Grid.RowDefinitions>
                                                                <TextBlock
                                                                    Grid.Row="0"
                                                                    Grid.Column="0"
                                                                    Margin="16,8,8,16"
                                                                    Style="{StaticResource MaterialDesignHeadlineTextBlock}"
                                                                    Text="{x:Static p:Resources.Options}" />
                                                                <TextBlock
                                                                    Grid.Row="1"
                                                                    Grid.Column="0"
                                                                    Margin="16,8,8,0"
                                                                    Text="{x:Static p:Resources.Delete_device}" />
                                                                <TextBlock
                                                                    Grid.Row="2"
                                                                    Grid.Column="0"
                                                                    Margin="16,0,8,8"
                                                                    FontSize="10"
                                                                    Opacity=".5"
                                                                    Style="{StaticResource MaterialDesignSubheadingTextBlock}"
                                                                    Text="{x:Static p:Resources.The_device_will_be_excluded_from_the_project}" />
                                                                <Button
                                                                    Grid.Row="1"
                                                                    Grid.RowSpan="2"
                                                                    Grid.Column="1"
                                                                    Margin="16,0"
                                                                    VerticalAlignment="Center"
                                                                    Command="{Binding ElementName=LbDevices, Path=DataContext.DeleteDeviceAsyncCommand, TargetNullValue={x:Null}}"
                                                                    CommandParameter="{Binding Path=.}"
                                                                    Content="{x:Static p:Resources._Delete}"
                                                                    FocusVisualStyle="{x:Null}"
                                                                    Style="{StaticResource MaterialDesignRaisedAccentButton}" />
                                                                <Button
                                                                    Grid.Row="0"
                                                                    Grid.Column="1"
                                                                    HorizontalAlignment="Right"
                                                                    VerticalAlignment="Top"
                                                                    Command="{x:Static materialDesign:PopupBox.ClosePopupCommand}"
                                                                    FocusVisualStyle="{x:Null}"
                                                                    Style="{StaticResource MaterialDesignFlatMidBgButton}">
                                                                    <materialDesign:PackIcon Kind="Close" />
                                                                </Button>
                                                                <Border Grid.Row="3" />
                                                            </Grid>
                                                        </materialDesign:PopupBox>
                                                    </Grid>
                                                    <Border
                                                        Margin="2"
                                                        Padding="4,2"
                                                        HorizontalAlignment="Right"
                                                        VerticalAlignment="Top"
                                                        Background="{StaticResource Dark}"
                                                        CornerRadius="4">
                                                        <TextBlock
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Foreground="White"
                                                            Text="{Binding DefaultName}" />
                                                    </Border>
                                                    <ctl:IsPrimaryUserControl
                                                        Margin="4"
                                                        HorizontalAlignment="Right"
                                                        VerticalAlignment="Bottom"
                                                        DataContext="{Binding Path=.}" />
                                                </Grid>
                                            </Border>
                                        </Grid>-->
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                                <ListBox.ItemContainerStyle>
                                    <Style BasedOn="{StaticResource MaterialDesignListBoxItem}" TargetType="{x:Type ListBoxItem}">
                                        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                                        <Setter Property="Cursor" Value="Hand" />
                                        <Setter Property="Opacity" Value="0" />
                                        <Style.Triggers>
                                            <Trigger Property="Visibility" Value="Visible">
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetProperty="Opacity"
                                                                From="0.0"
                                                                To="1.0"
                                                                Duration="0:0:1" />
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </ListBox.ItemContainerStyle>
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="PreviewMouseLeftButtonUp">
                                        <i:InvokeCommandAction Command="{Binding OpenGatewayCommand}" CommandParameter="{Binding ElementName=LbDevices, Path=SelectedItem}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </ListBox>
                            <TextBlock
                                Grid.Row="1"
                                Grid.RowSpan="3"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding SelectedProjectModel.Devices.Count}" Value="0">
                                                <Setter Property="Visibility" Value="Visible" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                                <Hyperlink
                                    Command="{Binding GoToAddIPDeviceCommand}"
                                    Foreground="White"
                                    Style="{StaticResource MaterialDesignHeadline5Hyperlink}">
                                    <TextBlock
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Text="{x:Static p:Resources.Add_a_gateway_to_the_project}" />
                                </Hyperlink>
                            </TextBlock>
                        </Grid>
                    </TabItem>
                    <!--#endregion Gateways-->
                    <!--#region Configuration-->
                    <TabItem x:Name="Configuration" Header="{x:Static p:Resources.Configuration}">
                        <materialDesign:ColorZone
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Background="Transparent"
                            Mode="Dark">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*" />
                                    <ColumnDefinition Width="1*" />
                                </Grid.ColumnDefinitions>
                                <Grid Grid.Row="1" Margin="16">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <TextBox
                                        x:Name="ProjectModelName"
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="2"
                                        Margin="0,8"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Center"
                                        materialDesign:HintAssist.Hint="{x:Static p:Resources.Project_Name}"
                                        materialDesign:TextFieldAssist.HasClearButton="True"
                                        materialDesign:ValidationAssist.Background="{StaticResource Dark}"
                                        materialDesign:ValidationAssist.OnlyShowOnFocus="True"
                                        FontSize="14"
                                        MaxLength="60"
                                        Style="{StaticResource MaterialDesignFilledTextBox}">
                                        <TextBox.Text>
                                            <Binding
                                                Mode="TwoWay"
                                                Path="SelectedProjectModel.Name"
                                                UpdateSourceTrigger="PropertyChanged"
                                                ValidatesOnDataErrors="True"
                                                ValidatesOnNotifyDataErrors="True">
                                                <Binding.ValidationRules>
                                                    <validator:NotEmptyValidationRule TextError="{x:Static p:Resources.Required_field}" />
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox.Text>
                                    </TextBox>
                                    <Label
                                        Grid.Row="1"
                                        materialDesign:ThemeAssist.Theme="Dark"
                                        Content="{x:Static p:Resources.Primary_Design_Color}" />
                                    <TextBlock
                                        Grid.Row="2"
                                        Margin="4,0,0,16"
                                        Opacity=".5"
                                        Text="{x:Static p:Resources.Choose_Primary_Color_Project}" />
                                    <StackPanel Grid.Row="3" Margin="0,0,0,8">
                                        <ListBox
                                            x:Name="LbDefautColors"
                                            Background="BlueViolet"
                                            BorderBrush="Black"
                                            BorderThickness="2"
                                            ItemsSource="{Binding DefautColors}">
                                            <ListBox.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <WrapPanel />
                                                </ItemsPanelTemplate>
                                            </ListBox.ItemsPanel>
                                            <ListBox.ItemContainerStyle>
                                                <Style BasedOn="{StaticResource ListBoxItemStyle}" TargetType="{x:Type ListBoxItem}">
                                                    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                                                    <Setter Property="BorderThickness" Value="1" />
                                                    <Setter Property="Padding" Value="0" />
                                                    <Setter Property="BorderBrush" Value="Black" />
                                                    <Setter Property="Margin" Value="2" />
                                                </Style>
                                            </ListBox.ItemContainerStyle>
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <Border
                                                        Width="20"
                                                        Height="20"
                                                        Background="{Binding Path=.}"
                                                        FocusVisualStyle="{x:Null}">
                                                        <i:Interaction.Triggers>
                                                            <i:EventTrigger EventName="MouseDown">
                                                                <i:InvokeCommandAction Command="{Binding ElementName=LbDefautColors, Path=DataContext.SelectColorCommand}" CommandParameter="{Binding Path=.}" />
                                                            </i:EventTrigger>
                                                        </i:Interaction.Triggers>
                                                    </Border>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                    </StackPanel>
                                    <Grid Grid.Row="5" Grid.ColumnSpan="2">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="1*" />
                                            <RowDefinition Height="1*" />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="1*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Label
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            VerticalAlignment="Center"
                                            materialDesign:ThemeAssist.Theme="Dark"
                                            Content="{x:Static p:Resources.Deleted_Project}" />
                                        <TextBlock
                                            Grid.Row="1"
                                            Margin="4,0,0,16"
                                            Opacity=".5"
                                            Text="{x:Static p:Resources.The_project_will_be_sent_to_the_trash}" />
                                        <Button
                                            Grid.RowSpan="2"
                                            Grid.Column="1"
                                            VerticalAlignment="Center"
                                            Command="{Binding DeleteProjectAsyncCommand}"
                                            Content="{x:Static p:Resources._Delete}"
                                            FocusVisualStyle="{x:Null}"
                                            Style="{StaticResource DeleteButton}" />
                                    </Grid>
                                    <Grid Grid.Row="6" Grid.ColumnSpan="2">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="1*" />
                                            <RowDefinition Height="1*" />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="1*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Label
                                            Grid.Row="0"
                                            VerticalAlignment="Center"
                                            materialDesign:ThemeAssist.Theme="Dark"
                                            Content="{x:Static p:Resources.Updated_Project}" />
                                        <TextBlock
                                            Grid.Row="1"
                                            Margin="4,0,0,16"
                                            Opacity=".5"
                                            Text="{x:Static p:Resources.Updates_Project_Information}" />
                                        <Button
                                            Grid.RowSpan="2"
                                            Grid.Column="1"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Command="{Binding UpdateProjectCommand}"
                                            Content="{x:Static p:Resources._Update}"
                                            FocusVisualStyle="{x:Null}">
                                            <Button.Style>
                                                <Style BasedOn="{StaticResource UpdateButton}" TargetType="Button">
                                                    <Setter Property="IsEnabled" Value="False" />
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=(Validation.HasError), UpdateSourceTrigger=PropertyChanged, ElementName=ProjectModelName}" Value="False" />
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="IsEnabled" Value="True" />
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                    </Grid>
                                    <Grid Grid.Row="7" Grid.ColumnSpan="2">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="1*" />
                                            <RowDefinition Height="1*" />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="1*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Label
                                            Grid.Row="0"
                                            VerticalAlignment="Center"
                                            materialDesign:ThemeAssist.Theme="Dark"
                                            Content="{x:Static p:Resources.Archive_project}" />
                                        <TextBlock
                                            Grid.Row="1"
                                            Margin="4,0,0,16"
                                            Opacity=".5"
                                            Text="{x:Static p:Resources.Project_Sent_Archives_Page}" />
                                        <Button
                                            Grid.RowSpan="2"
                                            Grid.Column="1"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Command="{Binding ArchiveProjectCommand}"
                                            Content="{x:Static p:Resources._Archive}"
                                            FocusVisualStyle="{x:Null}">
                                            <Button.Style>
                                                <Style BasedOn="{StaticResource MaterialDesignRaisedDarkButton}" TargetType="Button">
                                                    <Setter Property="IsEnabled" Value="False" />
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding Path=(Validation.HasError), UpdateSourceTrigger=PropertyChanged, ElementName=ProjectModelName}" Value="False" />
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="IsEnabled" Value="True" />
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                    </Grid>
                                </Grid>
                                <Border
                                    Grid.Row="0"
                                    Grid.ColumnSpan="2"
                                    Style="{DynamicResource BorderMenu}" />
                                <Menu
                                    Grid.Row="0"
                                    Grid.ColumnSpan="2"
                                    Style="{StaticResource MaterialDesignMenuBillson}" />
                            </Grid>
                        </materialDesign:ColorZone>
                    </TabItem>
                    <!--#endregion Configuration-->
                    <!--#region Users-->
                    <TabItem
                        Name="Users"
                        Header="{x:Static p:Resources.Users}"
                        Visibility="Visible">
                        <TabItem.Resources>
                            <core:Double x:Key="userItemWidth">233</core:Double>
                        </TabItem.Resources>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Border
                                Grid.Row="0"
                                Margin="0"
                                materialDesign:ThemeAssist.Theme="Dark"
                                Background="Black"
                                Cursor="Hand">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="6" ShadowDepth="1" />
                                </Border.Effect>
                            </Border>
                            <Menu
                                Grid.Row="0"
                                Grid.ColumnSpan="3"
                                Background="{StaticResource Dark}"
                                Cursor="Hand"
                                IsMainMenu="True"
                                Style="{StaticResource MaterialDesignMenuBillson}">
                                <MenuItem
                                    materialDesign:ThemeAssist.Theme="Dark"
                                    Foreground="White"
                                    Header="_Edit"
                                    Style="{StaticResource MaterialDesignMenuItem}">
                                    <MenuItem
                                        Command="{Binding UpdateProjectCommand}"
                                        Header="{x:Static p:Resources._Update}"
                                        Style="{StaticResource MaterialDesignMenuItem}" />
                                    <Separator Style="{StaticResource MaterialDesignDarkSeparator}" />
                                    <MenuItem Command="{Binding ClearAllUsersFoundCommand}" Header="{x:Static p:Resources.Clear_all_users_found}">
                                        <MenuItem.Style>
                                            <Style BasedOn="{StaticResource MaterialDesignMenuItem}" TargetType="{x:Type MenuItem}">
                                                <Setter Property="IsEnabled" Value="True" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding SelectedProjectModel.UserFoundSearch.Count}" Value="0">
                                                        <Setter Property="IsEnabled" Value="False" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </MenuItem.Style>
                                    </MenuItem>
                                    <Separator Style="{StaticResource MaterialDesignDarkSeparator}" />
                                    <MenuItem Command="{Binding CleanAllMasterUsersCommand}" Header="{x:Static p:Resources.Clear_all_house_owners}">
                                        <MenuItem.Style>
                                            <Style BasedOn="{StaticResource MaterialDesignMenuItem}" TargetType="{x:Type MenuItem}">
                                                <Setter Property="IsEnabled" Value="True" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding SelectedProjectModel.MasterUsers.Count}" Value="0">
                                                        <Setter Property="IsEnabled" Value="False" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </MenuItem.Style>
                                    </MenuItem>
                                    <Separator Style="{StaticResource MaterialDesignDarkSeparator}" />
                                    <MenuItem Command="{Binding CleanAllUsersCommand}" Header="{x:Static p:Resources.Clear_all_house_home_residents}">
                                        <MenuItem.Style>
                                            <Style BasedOn="{StaticResource MaterialDesignMenuItem}" TargetType="{x:Type MenuItem}">
                                                <Setter Property="IsEnabled" Value="True" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding SelectedProjectModel.Users.Count}" Value="0">
                                                        <Setter Property="IsEnabled" Value="False" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </MenuItem.Style>
                                    </MenuItem>
                                </MenuItem>
                            </Menu>
                            <ScrollViewer Grid.Row="1">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid
                                        Grid.Row="1"
                                        Margin="16,16,0,16"
                                        VerticalAlignment="Center">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBox
                                            Grid.Column="0"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Center"
                                            materialDesign:HintAssist.Hint="{x:Static p:Resources.Search_for_user_by_email}"
                                            Style="{StaticResource MaterialDesignFilledTextBox}"
                                            Text="{Binding Email, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                                            <TextBox.InputBindings>
                                                <KeyBinding Command="{Binding FindUserByEmailCommand}" Gesture="Enter" />
                                            </TextBox.InputBindings>
                                        </TextBox>
                                        <Button
                                            Grid.Column="1"
                                            Height="44"
                                            Margin="16,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Stretch"
                                            Command="{Binding FindUserByEmailCommand}"
                                            Content="{x:Static p:Resources.Search}"
                                            FocusVisualStyle="{x:Null}"
                                            Style="{StaticResource MaterialDesignRaisedDarkButton}" />
                                    </Grid>
                                    <Grid
                                        Grid.Row="2"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="3"
                                        Margin="16,8,16,16">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            Grid.Row="0"
                                            Margin="4,16,0,0"
                                            Style="{StaticResource MaterialDesignBody1TextBlock}"
                                            Text="{x:Static p:Resources.Found_users}" />
                                        <ListBox
                                            x:Name="LbUserFoundSearch"
                                            Grid.Row="2"
                                            Height="180"
                                            Margin="0,16"
                                            HorizontalAlignment="Stretch"
                                            HorizontalContentAlignment="Stretch"
                                            dd:DragDrop.IsDragSource="True"
                                            dd:DragDrop.IsDropTarget="False"
                                            dd:DragDrop.UseDefaultDragAdorner="True"
                                            BorderBrush="#33000000"
                                            BorderThickness="2"
                                            Cursor="Hand"
                                            FocusVisualStyle="{x:Null}"
                                            ItemContainerStyle="{StaticResource selectedItem}"
                                            ItemTemplate="{StaticResource user}"
                                            ItemsSource="{Binding SelectedProjectModel.UserFoundSearch}">
                                            <ListBox.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <WrapPanel />
                                                </ItemsPanelTemplate>
                                            </ListBox.ItemsPanel>
                                        </ListBox>
                                    </Grid>
                                    <Grid
                                        Grid.Row="3"
                                        Grid.Column="0"
                                        Margin="16,8,8,16">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>
                                        <TextBlock
                                            Grid.Row="0"
                                            Margin="0,16,0,0"
                                            Style="{StaticResource MaterialDesignBody1TextBlock}"
                                            Text="{x:Static p:Resources.Project_programmers}" />
                                        <TextBlock
                                            Grid.Row="1"
                                            Opacity=".5"
                                            Text="{x:Static p:Resources.User_Permission_Edit_Project}"
                                            TextWrapping="WrapWithOverflow" />
                                        <ListBox
                                            x:Name="LbProgrammer"
                                            Grid.Row="2"
                                            Margin="0,16"
                                            HorizontalAlignment="Stretch"
                                            HorizontalContentAlignment="Stretch"
                                            dd:DragDrop.DropHandler="{Binding}"
                                            dd:DragDrop.IsDragSource="True"
                                            dd:DragDrop.IsDropTarget="True"
                                            dd:DragDrop.UseDefaultDragAdorner="True"
                                            BorderBrush="#33000000"
                                            BorderThickness="2"
                                            FocusVisualStyle="{x:Null}"
                                            ItemContainerStyle="{StaticResource selectedItem}"
                                            ItemTemplate="{StaticResource user}"
                                            ItemsSource="{Binding SelectedProjectModel.Programmers}">
                                            <ListBox.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <WrapPanel />
                                                </ItemsPanelTemplate>
                                            </ListBox.ItemsPanel>
                                        </ListBox>
                                    </Grid>
                                    <Grid
                                        Grid.Row="3"
                                        Grid.Column="1"
                                        Margin="8,8,8,16">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>
                                        <TextBlock
                                            Grid.Row="0"
                                            Margin="0,16,0,0"
                                            Style="{StaticResource MaterialDesignBody1TextBlock}"
                                            Text="{x:Static p:Resources.Master_user}" />
                                        <TextBlock
                                            Grid.Row="1"
                                            Opacity=".5"
                                            Text="{x:Static p:Resources.User_Permission_Edit_Project}"
                                            TextWrapping="WrapWithOverflow" />
                                        <ListBox
                                            x:Name="LbMasterUsers"
                                            Grid.Row="2"
                                            Margin="0,16"
                                            HorizontalAlignment="Stretch"
                                            HorizontalContentAlignment="Stretch"
                                            dd:DragDrop.DropHandler="{Binding}"
                                            dd:DragDrop.IsDragSource="True"
                                            dd:DragDrop.IsDropTarget="True"
                                            dd:DragDrop.UseDefaultDragAdorner="True"
                                            BorderBrush="#33000000"
                                            BorderThickness="2"
                                            FocusVisualStyle="{x:Null}"
                                            ItemContainerStyle="{StaticResource selectedItem}"
                                            ItemTemplate="{StaticResource user}"
                                            ItemsSource="{Binding SelectedProjectModel.MasterUsers}">
                                            <ListBox.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <WrapPanel />
                                                </ItemsPanelTemplate>
                                            </ListBox.ItemsPanel>
                                        </ListBox>
                                    </Grid>
                                    <Grid
                                        Grid.Row="3"
                                        Grid.Column="2"
                                        Margin="8,8,16,16">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>
                                        <TextBlock
                                            Grid.Row="0"
                                            Margin="0,16,0,0"
                                            Style="{StaticResource MaterialDesignBody1TextBlock}"
                                            Text="{x:Static p:Resources.User}" />
                                        <TextBlock
                                            Grid.Row="1"
                                            Opacity=".5"
                                            Text="{x:Static p:Resources.User_Permission_Edit_Project}"
                                            TextWrapping="WrapWithOverflow" />
                                        <ListBox
                                            x:Name="LbUsers"
                                            Grid.Row="2"
                                            Margin="0,16"
                                            HorizontalAlignment="Stretch"
                                            HorizontalContentAlignment="Stretch"
                                            dd:DragDrop.DropHandler="{Binding}"
                                            dd:DragDrop.IsDragSource="True"
                                            dd:DragDrop.IsDropTarget="True"
                                            dd:DragDrop.UseDefaultDragAdorner="True"
                                            BorderBrush="#33000000"
                                            BorderThickness="2"
                                            FocusVisualStyle="{x:Null}"
                                            ItemContainerStyle="{StaticResource selectedItem}"
                                            ItemTemplate="{StaticResource user}"
                                            ItemsSource="{Binding SelectedProjectModel.Users}">
                                            <ListBox.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <WrapPanel />
                                                </ItemsPanelTemplate>
                                            </ListBox.ItemsPanel>
                                        </ListBox>
                                    </Grid>
                                    <Button
                                        Grid.Row="4"
                                        Grid.Column="2"
                                        Margin="0,0,16,16"
                                        HorizontalAlignment="Right"
                                        Command="{Binding UpdateProjectCommand}"
                                        Content="{x:Static p:Resources._Update}"
                                        FocusVisualStyle="{x:Null}">
                                        <Button.Style>
                                            <Style BasedOn="{StaticResource UpdateButton}" TargetType="Button">
                                                <Setter Property="IsEnabled" Value="False" />
                                                <Style.Triggers>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding Path=(Validation.HasError), UpdateSourceTrigger=PropertyChanged, ElementName=ProjectModelName}" Value="False" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="IsEnabled" Value="True" />
                                                    </MultiDataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </Grid>
                            </ScrollViewer>
                        </Grid>
                    </TabItem>
                    <!--#endregion Users-->
                </TabControl>
            </Grid>
            <ctl:SnackbarUserControl />
        </Grid>
    </materialDesign:DialogHost>
</Page>